<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="MP Rogers">
<meta name="dcterms.date" content="2024-04-04">

<title>Respect the Sharks, Don’t Fear them. – Sun and Sea</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Sun and Sea</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Sun and Sea</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../portfoliohub.html"> 
<span class="menu-text">Portfolio</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/Rogers_M_P"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Respect the Sharks, Don’t Fear them.</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Marine Biology</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>MP Rogers </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 4, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Today, I’ll be writing about sharks. In truth, this post is a long time coming. Last year, I attended a seminar on sharks. Specifically the seminar was on dispelling the fear around them, and spreading an appreciation of them. Since then, I’ve spoken to my friends and some colleagues about what I’ve learned. I’m going to use this platform, as another way to get the word out there.</p>
<p>Just a disclaimer, I’ve only seen a nurse shark once in the water and didn’t photograph it. As such all of the images here are borrowed from the internet, credit for them goes to the photographers, not me.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Shark Collage.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<section id="just-what-makes-them-so-scary" class="level3">
<h3 class="anchored" data-anchor-id="just-what-makes-them-so-scary">Just what makes them so scary</h3>
<p>So I’ll address the elephant in the room. Most people are terrified of sharks. In fact, when I say shark, you probably think of some man-eating monster ready to gobble you up if you enter the water. Now I’ll freely admit, as a marine biologist, with friends and colleagues who are also marine biologists, we probably do not count as the “average person” when it comes to sharks. We are probably at least a little less afraid to begin with.</p>
<p>But why? Believe me, there’s plenty of stuff in the ocean to make your heart race. I think I boiled it down to a couple main reasons:</p>
<ol type="1">
<li><p>Thinking of sharks as man eating killing machines ( I blame the media)</p></li>
<li><p>The fear of the unknown.</p></li>
</ol>
<p>For a lot of people people, the fear of sharks is pretty much the fear that the shark will eat them. Its a very real and primal fear. It is very understandable.</p>
<p>However, I’m of the view It is also exacerbated by the media. Jaw’s may be the principal offender. That movie did a lot for putting sharks into the public consciousness as man eating sea monsters, but its not the only one. There are tons of shows, series and media that portray sharks as, if not mindless man-eaters, villains. Heck, I sat through a couple cheesy ones myself like Sharknado (and then proceeded to wonder how they kept making sequels). This most certainly doesn’t help. Its only very recently I’ve realised the impact and power of a good story. I’ll get back to that bit later.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Jaws Poster.jpg" class="img-fluid figure-img" width="470"></p>
<figcaption>Jaws, one of the movies that shaped perception of sharks for the worst</figcaption>
</figure>
</div>
<p>But there’s something deeper. The way I see it fear of sharks is, in a lot of ways, a fear of the unknown and being out of one’s element. The less we know about something, the more the fear can play on our minds. People don’t know much about sharks (and the ocean as a whole really.)</p>
<p>And that almost inevitably comes with some level of anxiety. It means getting in the water with a shark, is like going around some monster you can’t fight and cant run from. It’s scary.</p>
<p>I could tell you shark attacks are super rare. I could tell you that even when they occur, they aren’t usually fatal. That would all be true. But I want to go deeper and tackle some of that fear of the unknown.</p>
<p>So today, we’ll learn a little about sharks and start chipping away at that fear of the unknown, and hopefully replace some of that fear with respect.</p>
</section>
<section id="but-they-are-mindless-man-eaters-right" class="level3">
<h3 class="anchored" data-anchor-id="but-they-are-mindless-man-eaters-right">But they are mindless man-eaters? Right?</h3>
<p>There are tons of sharks. Some scarier looking than others. There are huge slow moving sharks which only eat prey the size of small fish and shrimp.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Whale Shark.jpg" class="img-fluid figure-img"></p>
<figcaption>I’m sure this is not what you thought when I said Shark. This guy is a whale shark. which is 100% a shark and not a whale.</figcaption>
</figure>
</div>
<p>But when you hear me say shark, I doubt you picture a whale shark. You likely think something like a hammerhead, or a great white shark. Sharks are predators. But they aren’t usually aren’t hunting for you.</p>
<p>Perhaps one of the biggest things to impart here is that sharks aren’t mindless. Sharks are usually selective about what they eat. It makes sense, it takes a lot of energy to catch something to eat, sharks are smart enough to get the best “bang for their buck.” They want the most energy/calories for the least effort.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Seal getting chomped.webp" class="img-fluid figure-img"></p>
<figcaption>Sharks like oily, fatty food(something we have in common). This is usually things like tuna or seals. Definitely not you</figcaption>
</figure>
</div>
<p>Of course, even if we aren’t on the menu, the bleeding fish that a spearfisher carries is way easier to get than catching a live one. Since its easy, the lazy (I mean efficient) shark will usually go after it, but keeping it away from the body usually manages that risk just fine.</p>
<p>In fact, sharks can be trained. They can be taught to associate specific signals with feeding time for a specific shark. This usually happens in aquariums, but others sharks will recognize its not their time and just keep swimming and chilling.</p>
<p>Sharks do get curious and some may take a test bite, but you’ll find we just are not the kind of things sharks want on the menu.</p>
</section>
<section id="but-how-will-i-know-if-the-shark-is-hunting-me" class="level3">
<h3 class="anchored" data-anchor-id="but-how-will-i-know-if-the-shark-is-hunting-me">But how will I know if the shark is hunting me?</h3>
<p>There are ways to tell if a shark is out hunting or just cruising. A cruising shark moves smooth; slowly and evenly moving through the water. When they tuck their fins down and start moving jerky, or circling? That’s a hunting shark. Sure they have different body language cues than a dog or a person, but you can learn them all the same.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.google.com/url?sa=i&amp;url=https%3A%2F%2Fwww.csulb.edu%2Fshark-lab%2Fstaying-safe-at-the-beach&amp;psig=AOvVaw32TTPHHtCc_Ac8Nxg_18Mf&amp;ust=1712280765292000&amp;source=images&amp;cd=vfe&amp;opi=89978449&amp;ved=0CBQQjhxqFwoTCPj6iIi1p4UDFQAAAAAdAAAAABAG"><img src="shark-behaviors-chart.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="349" alt="The body language of a shark, you can learn if that shark is looking for a bite or just passing by."></a></p>
</figure>
</div>
<figcaption>The body language of a shark, you can learn if that shark is looking for a bite or just passing by.</figcaption>
</figure>
</div>
<p>I’d of course like to establish that if you decide to mess with the shark…well…that ones on you. None of this is to say sharks are harmless. But there’s tons of predators we acknowledge are hunters but don’t think of as monsters. Look at Lions for example.</p>
<p>And sharks are important. I made a <a href="https://mparogers.com/docs/posts/Connection,%20as%20a%20Marine%20Biologist/Connections.html">post here</a> about how things are connected. Sharks are usually apex predators. At maturity, not much is going to take on a shark. And they play the vital role of what ecologists like to call top down control. They feed on other animals, usually the weak, diseased and dying and so do two very important things:</p>
<ol type="1">
<li>They keep the living population fit, strong and healthy.</li>
<li>They keep the population under control. This means that the prey won’t overpopulate and use up their food sources which could collapse whole habitats and ecosystems unchecked</li>
</ol>
<p>A sea without sharks(or something filling the role of a shark), becomes diseased and overpopulated. Sharks are a good sign, and play a vital role in keeping seas functioning.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Thresher.jpg" class="img-fluid figure-img"></p>
<figcaption>Sharks like this thresher are good for the environment and play a vital role in keeping the seas running</figcaption>
</figure>
</div>
<p>Which makes the rapid decline of our sharks all the more concerning. Sharks mature slowly and breed slowly, and it can be decades until a shark can reproduce. This slow reproductive cycle means it takes a while for the population to recover from shock. And we are giving them a heck of a shock. Between by-catch, the cruelty that is shark finning (they fin them and throw them in crippled to drown) and general pollution, we have put a crazy dent in the population of our sharks.</p>
</section>
<section id="so-what-do-we-do" class="level2">
<h2 class="anchored" data-anchor-id="so-what-do-we-do">So, What do we do?</h2>
<p>I’m doing my best to learn to be solution oriented. This post is to educate, but education should go into doing things to help make the world better. So here’s a short list of some things we can do.</p>
<ol type="1">
<li>Go visit an aquarium. Go see for yourself. Tons of them have sharks in tanks with other fish, kinda disproves the whole “eats anything in front of it” myth. Ask questions about them. Learn more.</li>
<li>Share articles and stories like these. Talk to people who know a bit about sharks. Start chipping away at that fear of the unknown.</li>
<li>Tell better stories. I’ve been harping on the fact that media portrayal has a lot to do with how we see sharks. But we have the power to tell better stories. Heroic sharks… shark stories like that could do as much good for the sharks’ image as works like “Flipper”, “Free Willy” or “A Dolphin’s tale.</li>
</ol>
<p>So let’s try to learn a little more, so we can fear a little less about sharks. They are worthy of a healthy respect, so you and I can start by giving them that respect and letting it take the place of the fear.</p>
<p>Walk good.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>